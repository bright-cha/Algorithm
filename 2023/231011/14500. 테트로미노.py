import sys

input = sys.stdin.readline

tetris = [[(0, 0), (0, 1), (0, 2), (0, 3)],
         [(0, 0), (1, 0), (2, 0), (3, 0)],
         [(0, 0), (1, 0), (0, 1), (1, 1)],
         [(0, 0), (1, 0), (2, 0), (2, 1)],
         [(0, 1), (1, 1), (2, 1), (2, 0)],
         [(0, 0), (0, 1), (1, 1), (2, 1)],
         [(0, 0), (0, 1), (1, 0), (2, 0)],
         [(0, 0), (1, 0), (1, 1), (1, 2)],
         [(0, 2), (1, 1), (1, 2), (1, 0)],
         [(0, 0), (0, 1), (0, 2), (1, 2)],
         [(0, 0), (1, 0), (0, 1), (0, 2)],
         [(0, 0), (1, 0), (1, 1), (2, 1)],
         [(0, 1), (1, 1), (1, 0), (2, 0)],
         [(1, 0), (1, 1), (0, 1), (0, 2)],
         [(0, 0), (0, 1), (1, 1), (1, 2)],
         [(0, 1), (1, 0), (1, 1), (1, 2)],
         [(0, 0), (0, 1), (0, 2), (1, 1)],
         [(0, 0), (1, 0), (1, 1), (2, 0)],
         [(0, 1), (1, 1), (1, 0), (2, 1)]]

N, M = map(int, input().split())
matrix = [list(map(int, input().split())) for _ in range(N)]

max_v = 0
for i in range(N):
    for j in range(M):
        for tetri in tetris:
            temp = 0
            for dx, dy in tetri:
                nx, ny = i + dx, j + dy
                if 0 <= nx < N and 0 <= ny < M:
                    temp += matrix[nx][ny]
            max_v = max(max_v, temp)

print(max_v)
